<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>User Profile</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* 如果有任何自定义样式，可以放在这里 */
    </style>
</head>

<body>
    <h1>Welcome, {{ user.username }}</h1>
    < img src="{{ user.avatar_url }}" alt="{{ user.username }}" width="100">
    <p>Id: {{ user.id }}</p >
    <p>Email: {{ user.email }}</p >
    <p>Bio: {{ user.bio }}</p >
    <p>Public Repositories: {{ user.public_repos }}</p >
    <p>Followers: {{ user.followers }}</p >
    <p>Following: {{ user.following }}</p >
    <p>Joined GitHub on: {{ user.created_at }}</p >
    <p>Last updated on: {{ user.updated_at }}</p >
    <a href = "{{ url_for('logout') }}">
        <button>Logout</button>
    </a>

    <!-- 饼图部分 -->
    <div class="text-center mt-4">
        <canvas id="followersFollowingChart" width="50" height="50"></canvas>
    </div>

    <!-- 用于渲染饼图的JavaScript -->
    <script>
        const ctx = document.getElementById('followersFollowingChart').getContext('2d');
        const chart = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: ['Followers', 'Following'],
                datasets: [{
                    label: 'Followers vs Following',
                    data: [{{ user.followers }}, {{ user.following }}],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)'
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)'
                    ],
                    borderWidth: 1
                }]
            }
        });
    </script>
</body>

</html>
